"""
Daily fees aggregated by currency across all chains.
"""
type CryptoFeesDaily @entity {
  """
  Unique identifier: YYYY-MM-DD_currency
  """
  id: ID!

  """
  Total fee amount for this day in BigInt format (wei-equivalent, e.g., 2e16)
  """
  amount: BigInt!

  """
  Total fee amount for this day in human-readable format (e.g., "0.02")
  """
  amountDisplay: String!

  """
  Native currency symbol (ETH, POL, BNB, etc.)
  """
  currency: String!

  """
  Reference to the parent daily fiat fees
  """
  dailyFiatFees: FiatFeesDaily!

  """
  Date in YYYY-MM-DD format
  """
  date: String!

  """
  Date as Unix timestamp for easier querying
  """
  dateTimestamp: Timestamp!

  """
  Transactions in this currency for this day
  """
  transactions: [FeeTransaction!]! @derivedFrom(field: "dailyCryptoFees")
}

"""
Aggregated fees across all chains and all currencies for a particular day.
"""
type FiatFeesDaily @entity {
  """
  Unique identifier: YYYY-MM-DD
  """
  id: ID!

  """
  GBP value of the fee amount in BigInt format (cents/pence, e.g., 12550 for £125.50)
  """
  amountGBP: BigInt!

  """
  GBP value of the fee amount in human-readable format (e.g., "125.50")
  """
  amountDisplayGBP: String!

  """
  USD value of the fee amount in BigInt format (cents, e.g., 15000 for $150.00)
  """
  amountUSD: BigInt!

  """
  USD value of the fee amount in human-readable format (e.g., "150.00")
  """
  amountDisplayUSD: String!

  """
  Fee breakdown by currency for this day
  """
  currencyBreakdown: [CryptoFeesDaily!]! @derivedFrom(field: "dailyFiatFees")

  """
  Date in YYYY-MM-DD format
  """
  date: String!

  """
  Date as Unix timestamp for easier querying
  """
  dateTimestamp: Timestamp!

  """
  Transactions
  """
  transactions: [FeeTransaction!]! @derivedFrom(field: "dailyFiatFees")
}

"""
Aggregated fee collections by currency across all chains and protocols.
"""
type FeeCollectionDaily @entity {
  """
  Unique identifier: YYYY-MM-DD_currency
  """
  id: ID!

  """
  Total fee amount collected for this day in BigInt format (wei-equivalent, e.g., 2e16)
  """
  amount: BigInt!

  """
  Total fee amount collected for this day in human-readable format (e.g., "0.02")
  """
  amountDisplay: String!

  """
  Native currency symbol (ETH, POL, BNB, etc.)
  """
  currency: String!

  """
  Date in YYYY-MM-DD format
  """
  date: String!

  """
  Date as Unix timestamp for easier querying
  """
  dateTimestamp: Timestamp!

  """
  Collection transactions for this day
  """
  transactions: [FeeCollection!]! @derivedFrom(field: "daily")
}

"""
Fee collection event.
"""
type FeeCollection @entity {
  """
  Unique identifier: chainId_transactionHash_logIndex
  """
  id: ID!

  """
  Admin address who collected the fees
  """
  admin: String!

  """
  Airdrop campaign address (only for Airdrops events, corresponds to merkleBase from event)
  """
  airdropCampaign: String

  """
  Fee amount collected in BigInt format (wei-equivalent, e.g., 2e16)
  """
  amount: BigInt!

  """
  Fee amount collected in human-readable format (e.g., "0.02")
  """
  amountDisplay: String!

  """
  Block number of the transaction
  """
  block: BigInt!

  """
  Chain ID where the fee was collected
  """
  chainId: BigInt!

  """
  Native currency symbol (ETH, POL, BNB, etc.)
  """
  currency: String!

  """
  The contract address that emitted the event
  """
  contractAddress: String!

  """
  The tx.origin of the Ethereum transaction.
  """
  caller: Bytes!

  """
  Reference to FeeCollectionDaily entity
  """
  daily: FeeCollectionDaily!

  """
  Transaction hash
  """
  hash: String!

  """
  Log index within the transaction
  """
  logIndex: BigInt!

  """
  Protocol type: "airdrops", "flow", or "lockup"
  """
  protocol: String!

  """
  Block Unix timestamp
  """
  timestamp: Timestamp!
}

"""
Ethereum transaction that generated a fee, which is due to be collected.
"""
type FeeTransaction @entity {
  """
  Unique identifier: chainId_transactionHash
  """
  id: ID!

  """
  Fee amount from this transaction in BigInt format (wei-equivalent, e.g., 2e16)
  """
  amount: BigInt!

  """
  Fee amount from this transaction in human-readable format (e.g., "0.02")
  """
  amountDisplay: String!

  """
  GBP value of the fee amount from this transaction in BigInt format (cents/pence, e.g., 1250 for £12.50)
  """
  amountGBP: BigInt!

  """
  GBP value of the fee amount from this transaction in human-readable format (e.g., "12.50")
  """
  amountDisplayGBP: String!

  """
  USD value of the fee amount from this transaction in BigInt format (cents, e.g., 1500 for $15.00)
  """
  amountUSD: BigInt!

  """
  USD value of the fee amount from this transaction in human-readable format (e.g., "15.00")
  """
  amountDisplayUSD: String!

  """
  Block number of the transaction
  """
  block: BigInt!

  """
  Chain ID where the fee was generated
  """
  chainId: BigInt!

  """
  The contract address where the fee was generated
  """
  contractAddress: String!

  """
  Native currency symbol (ETH, POL, BNB, etc.)
  """
  currency: String!

  """
  Reference to CryptoFeesDaily entity
  """
  dailyCryptoFees: CryptoFeesDaily!

  """
  Reference to FiatFeesDaily entity
  """
  dailyFiatFees: FiatFeesDaily!

  """
  Transaction hash
  """
  hash: String!

  """
  Block Unix timestamp
  """
  timestamp: Timestamp!
}

"""
A user is an address that has interacted with at least one Sablier contract.

This includes:

- Stream creators and senders
- Stream recipients
- Airdrop creators and claimers
- Anyone who withdraws from streams or claims airdrops on behalf of others

Notes:

- Only implemented in Envio.
- This is an internal entity we use for analytics. It's not used in the Sablier UI.
- May be enhanced with derived relations in the future. See https://github.com/sablier-labs/indexers/issues/159
"""
type User @entity {
  """
  Unique identifier: chainId_address
  """
  id: ID!

  """
  User's Ethereum address (lowercase)
  """
  address: String!

  """
  Chain ID where this user was first seen
  """
  chainId: BigInt!

  """
  True if user has only claimed airdrops (no other protocol interaction)
  """
  isOnlyAirdropClaimer: Boolean!

  """
  Transactions
  """
  transactions: [UserTransaction!]! @derivedFrom(field: "user")
}

"""
Transaction-level user interaction tracking.
"""
type UserTransaction @entity {
  """
  Unique identifier: userId_transactionHash
  """
  id: ID!

  """
  Block number of the transaction
  """
  block: BigInt!

  """
  The contract address where the revenue was generated
  """
  contractAddress: String!

  """
  Transaction fee in BigInt format (wei-equivalent, e.g., 2e16)
  """
  fee: BigInt!

  """
  Transaction fee in human-readable format (e.g., "0.02")
  """
  feeDisplay: String!

  """
  Transaction hash
  """
  hash: String!

  """
  Whether this transaction is an airdrop claim
  """
  isAirdropClaim: Boolean!

  """
  Block timestamp
  """
  timestamp: Timestamp!

  """
  Reference to User entity
  """
  user: User!
}
