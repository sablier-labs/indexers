"""
A user is an address that has interacted with at least one Sablier contract.

This includes:

- Stream creators and senders
- Stream recipients
- Airdrop creators and claimers
- Anyone who withdraws from streams or claims airdrops on behalf of others

Notes:

- Only implemented in Envio.
- This is an internal entity we use for analytics. It's not used in the Sablier UI.
- May be enhanced with derived relations in the future. See https://github.com/sablier-labs/indexers/issues/159
"""
type User @entity(immutable: false) {
  """
  Unique identifier: `user-{chainId}-{address}`
  """
  id: ID!

  """
  The address of the user.
  """
  address: Bytes!

  """
  The chain ID where this user was active (e.g., 137 for Polygon).
  """
  chainId: BigInt!

  """
  Whether the user exclusively interacted with Sablier as an airdrop claimer.
  This flag is set to false once the user interacts with other Sablier contracts.
  """
  isOnlyAirdropClaimer: Boolean!

  """
  User transactions.
  """
  transactions: [UserTransaction!]! @derivedFrom(field: "user")
}

type UserTransaction @entity(immutable: true) {
  """
  Unique identifier: `{userId}-{txHash}`
  """
  id: ID!

  """
  Block number of the transaction.
  """
  block: BigInt!

  """
  The fee paid by the user denominated in the chain's native token (e.g., ETH on Mainnet).
  The value is normalized to 18 decimals (e.g., 0.1e18 is 0.1).
  """
  fee: Float!

  """
  Hash of the transaction.
  """
  hash: Bytes!

  """
  Whether the transaction was an airdrop claim.
  """
  isAirdropClaim: Boolean!

  """
  Unix timestamp of the transaction.
  """
  timestamp: BigInt!

  """
  The user involved in the transaction.
  """
  user: User!
}
